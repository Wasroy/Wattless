üöÄ NERVE : MASTER BLUEPRINT (Tech & Business)
Document de r√©f√©rence complet (PRD + Specs Architecture)
Version : 4.0 ‚Äî Vision "Bulletproof" (Intra-R√©gion & Time-Shifting)

1. VISION & EXECUTIVE SUMMARY
La Vision : Nerve est un Orchestrateur Cloud de FinOps et MLOps Local. Au lieu de combattre la physique des r√©seaux en d√©pla√ßant les calculs √† l'autre bout du monde (ce qui tue les performances et fait exploser les Egress Fees), NERVE voyage dans le temps et entre les b√¢timents d'une m√™me ville.
La Promesse Client : Diviser la facture des GPU par 3 pour l'entra√Ænement IA et le rendu 3D, avec une garantie de z√©ro coupure et z√©ro latence. On a le prix du Spot, avec la fiabilit√© du Premium.

Le Principe Fondamental : Respecter la "Data Gravity"
Un GPU qui s'√©loigne de sa donn√©e meurt de faim (GPU Starvation). NERVE garde le calcul au plus pr√®s de la donn√©e (latence < 1ms), mais joue sur le temps (Time-Shifting) et l'√©vacuation d'urgence micro-locale (AZ-Hopping) pour casser les prix.

Le Job to be Done (JTBD) :

"Quand ma facture Cloud explose √† cause de mes entra√Ænements de LLM, je veux ex√©cuter mes calculs au prix le plus bas possible de fa√ßon 100% automatis√©e, et sans aucun risque de perdre ma progression en cas de coupure de serveur."

2. R√àGLES FONDAMENTALES (LES 3 PILIERS)
PILIER 1 - Arbitrage Z√©ro-Latence (L'AZ-Hopping) : On ne change jamais de pays ou de r√©gion Cloud. Nerve scanne les prix des GPU Spot dans les diff√©rentes Zones de Disponibilit√© (AZ) d'une m√™me r√©gion (ex: Paris AZ-A, AZ-B, AZ-C). Nerve d√©place le calcul d'un b√¢timent √† l'autre. Le transfert de donn√©es intra-r√©gion co√ªte presque 0‚Ç¨ et la latence est < 1 milliseconde.

PILIER 2 - L'Arbitrage Temporel (Le Time-Shifting) : Le d√©veloppeur soumet son job avec une "Deadline" (ex: "J'ai besoin de ce mod√®le pour demain 8h"). Nerve met le calcul en pause intelligente et attend la nuit (heures creuses) pour lancer le calcul quand les prix Spot s'effondrent et que le r√©seau √©lectrique local est moins carbon√©.

PILIER 3 - Le Bouclier Technologique (Smart Checkpointing) : On transforme le Spot (instable) en On-Demand (fiable). Si AWS signale une coupure imminente du serveur Spot (pr√©avis de 2 min), Nerve ne fait pas que d√©placer le conteneur : il interagit avec le framework d'IA (ex: PyTorch) pour sauvegarder instantan√©ment les poids du mod√®le (Checkpointing) sur un stockage pas cher (S3). L'entra√Ænement reprendra sur le nouveau serveur exactement l√† o√π il s'est arr√™t√©. Z√©ro perte.

3. CIBLE CLIENT (ICP - Ideal Customer Profile)
L'outil est pens√© pour les architectures modernes (Kubernetes). Nos premiers clients sont :

Startups IA (La cible prioritaire) : Fine-tuning de LLMs, Machine Learning (fort besoin en GPU, factures √©normes).

Studios 3D / Vid√©o : Jobs de rendu lourds (t√¢ches tr√®s asynchrones).

AdTech / Data : Traitement de donn√©es massives (ETL asynchrone).
(Note : On exclut les secteurs hyper-r√©gul√©s type Banques/Sant√© pour le MVP).

4. ARCHITECTURE TECHNIQUE & STACK
Moteur & Orchestration : Go (Golang) - Pour interagir avec l'API Kubernetes √† la milliseconde.

Mod√®le Pr√©dictif (IA) : Python + PyTorch (S√©ries temporelles l√©g√®res pour pr√©dire les creux tarifaires locaux).

Cache & D√©cision temps r√©el : Redis (Stockage des prix Spot locaux √† la milliseconde).

Observabilit√© : Prometheus (M√©triques FinOps) + Grafana (Dashboard).

D√©ploiement : Package Helm (helm install nerve-agent).

5. LES 5 MODULES DU PRODUIT (FEATURES)
Module 1 : Workload Profiler (L'Intercepteur)
M√©canisme : Mutating Admission Webhook Kubernetes.

R√¥le : Intercepte la cr√©ation de Pods tagg√©s nerve.io/tier: async. Nerve lit la deadline demand√©e par le d√©veloppeur et prend le contr√¥le du routage. Il ignore totalement les pods d'API web en direct (Synchrone) ou les bases de donn√©es (Stateful).

Module 2 : Local Intelligence Engine (Le Radar Micro-Local)
M√©canisme : Scraping continu des APIs Cloud de la r√©gion locale du client.

Sources : * Prix en temps r√©el des GPU Spot sur toutes les Zones de Disponibilit√© (AZ) de la r√©gion locale.

API r√©seau √©lectrique local (ex: RTE en France) pour mesurer l'intensit√© carbone √† l'instant T.

Module 3 : AZ-Hopping Scheduler & Smart Checkpointer (Le C≈ìur du R√©acteur)
M√©canisme : Custom Kubernetes Scheduler + int√©gration MLOps.

R√¥le : Place le Pod sur le datacenter (AZ) le moins cher de la ville.

L'√âvacuation d'Urgence : Si AWS envoie l'alerte Spot Interruption Notice (via l'endpoint 169.254.169.254), Nerve ex√©cute le protocole d'urgence :

Appel API au conteneur (PyTorch) : "Sauvegarde ton Checkpoint sur S3 imm√©diatement".

Cordon du n≈ìud condamn√©.

D√©marrage d'un nouveau GPU Spot dans l'AZ voisine.

Red√©ploiement du Pod qui t√©l√©charge le Checkpoint et reprend l'entra√Ænement.

Module 4 : Green Time-Shifter (Le Planificateur √âcolo/FinOps)
M√©canisme : Job Queue Kubernetes avec contrainte de Deadline.

R√¥le : Met en pause les entra√Ænements non-urgents (Pending) et les d√©clenche (Trigger) automatiquement quand les prix Spot locaux touchent le fond (g√©n√©ralement entre 2h et 5h du matin) OU quand le r√©seau √©lectrique passe au vert (√©olien/solaire).

Module 5 : Dashboard FinOps/GreenOps
M√©canisme : UI l√©g√®re.

R√¥le : Prouver la valeur de l'outil.

Savings ($) : Diff√©rence entre le prix On-Demand et le Spot pay√© sur le mois.

Interruptions g√©r√©es : Nombre de coupures esquiv√©es gr√¢ce au Smart Checkpointing.

Carbone √âvit√© (CO2) : Impact du Time-Shifting nocturne.

6. SP√âCIFICATIONS & CONTRAINTES DE CODE (SPECS MILITAIRES)
Performances : L'agent Nerve doit consommer < 50 Mo de RAM et < 0.1 vCPU.

S√©curit√© & RBAC : Acc√®s limit√© aux Nodes et Pods. Interdiction absolue de requ√™ter les Secrets ou les donn√©es client.

Fail-Safe : Si l'agent Nerve perd internet ou crash, le cluster repasse silencieusement sur l'orchestrateur par d√©faut d'AWS/K8s. Le client ne doit jamais √™tre bloqu√©.

7. GESTION DES RISQUES & EDGE CASES (POUR LES DEVS)
Cas A - P√©nurie TOTALE de GPU Spot dans la r√©gion : Si l'AZ-A, l'AZ-B et l'AZ-C n'ont plus aucun GPU en solde, Nerve active le "Fallback". Il lance le calcul sur un serveur Premium plein tarif (On-Demand) pour respecter la Deadline du client co√ªte que co√ªte.

Cas B - Le Checkpoint prend plus de 2 minutes : Si le mod√®le est gigantesque et que la sauvegarde sur S3 prend trop de temps par rapport au pr√©avis d'AWS, Nerve s'appuie sur une fr√©quence de sauvegarde asynchrone r√©guli√®re pilot√©e par le script PyTorch du client.

Cas C - Boucle d'√©viction : Un "Eviction Rate Limiter" emp√™che un calcul de rebondir plus de 2 fois par heure entre les b√¢timents pour √©viter le chaos sur le r√©seau.

8. ROADMAP DU MVP (Ce qu'on code le Mois 1 - Pour le Hackathon)
L'√©quipe tech se concentre sur un Use Case chirurgical :

Semaine 1-2 : Agent basique (Webhook + Scheduler). Arbitrage sur 3 AZ AWS pour un Pod contenant un calcul factice.

Semaine 3 : Coder le Smart Checkpointing. Simuler une coupure AWS, prouver que le Pod sauvegarde son √©tat et reprend sur une autre machine de l'AZ voisine sans perdre son avanc√©e.

Semaine 4 : Un Dashboard affichant le ROI ($ sauv√©s).